<!DOCTYPE html>


	<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
	<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="/css/minihomepage.css">
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/font.css">
    <link rel="stylesheet" href="/css/header.css">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<script src="/summernote/summernote-lite.js"></script>
	<script src="/summernote/lang/summernote-ko-KR.js"></script>
	<link rel="stylesheet" href="/summernote/summernote-lite.css">
	<script src="/js/sweetalert.min.js"></script>

<style>
 .profile-text> input{
 	width: 100%;
    height: 100px;  
    border: none;
    resize: none;
    padding: 0;
    overflow: hidden;
 }
 .profile-image-area{
 	display: flex;
 	justify-content: center;
 	align-items: center;
 }
 .profile-image-img{
 	width: 200px;
 	height: 200px;
 	border-radius: 15px;
 }
 .follow-btn{
 	display: flex;
 	justify-content: center;
 	align-content: center;
 	padding-bottom: 5px;
 }
 .profile-btn-area{
 	visibility: hidden;
 }
 .swiper{
 	width:500px;
 	height:300px;
 	
 }
 .slide-image{
 
 	
 	
 }
 .swiper-img-wrap{
 	height:300px;
 	display: flex;
 	align-items: center;
 	justify-content: center 
 }
 .slide-image .slide{
	height : 100%;
	object-fit : contain;
	}
 .swiper-button-prev{
	display: none;
}
.swiper-button-next{
	display: none;
}
.swiper-scrollbar{
	display: none;
}
</style>

	<th:block th:include="/common/header"></th:block>
	<div class="bookcover">
	<div class="bookdot">
		<div class="page">
			<div class="profile-container">
				<div class="header1 profile-title">
					TOTAL <span class="color-red" th:text="${member.totalCount}"></span>
				</div>
				<div class="box profile-box">
					<form action="/member/profile" method="POST" name="myPageFrm" id="profileFrm" enctype="multipart/form-data">

                    <div class="profile-image-area">
                            <img class="profile-image-img" th:src="@{/member/}+${member.profilePhoto}" id="profileImage">
                    </div>
                    <div class="profile-btn-area">
                        <input type="file" name="profilePhoto" id="imageInput" accept=".jpg,.png,.jpeg" onchange="submitFunction(this)">
                    </div>
                    </form>
					<div class="profile-text">
							<input id="profileContent" name="profileMsg" th:value="${member.profileMsg}">
					</div>
					<div class="profile-username">
						<span style="color: #0f1b5c" th:text="${session.member.memberName}"></span>(♪♬)
					</div>
					<div class="follow-btn-content">
						<form action="/friend" method="post">
							<div class="follow-btn">
								<button type="button">일촌하기</button>
							</div>
							<div class="follow-btn">
								<button type="button" onclick ="addGuestbookEntry()">일촌목록</button>
							</div>
						</form>
					</div>	
					</div>
			</div>
			<div class="content-container">
				<div class="header1 content-title">
					<div class="content-title-name" th:text="${session.member.memberName}+님의홈피"></div>
				</div>
				<div class="box content-box">
				
	<!--  <script> 
				$(function(){
				$("body").css("background-color","blue");
				$(".bookcover").css("background-color","");
				});
			</script>  -->
				
<script th:inline="javascript">
	const cover = [[${session.spCss[0].sellProduct.productUrl}]];
	const cursor = [[${session.spCss[1].sellProduct.productUrl}]];
	const font = [[${session.spCss[2].sellProduct.productUrl}]];
	console.log(cover);
	console.log(cursor);
	console.log(font);
	$(function(){
    	$("body").css("font-family",font);
    	$("body").css("cursor",cursor);
    	$(".bookcover").css("background-color",cover);
 	});


document.addEventListener('DOMContentLoaded', function () {
    var textarea = document.getElementById('profileContent');

    textarea.addEventListener('input', function () {
        var maxHeight = textarea.clientHeight;
        var scrollHeight = textarea.scrollHeight;

        if (scrollHeight > maxHeight) {
            // 문자 추가 방지
            textarea.value = textarea.value.slice(0, textarea.value.length - 1);
        }
    });
});
$("#profileContent").on("change",function(){
	const profileMsg = $("#profileContent").val();
	console.log(profileMsg);
	$.ajax({
		url : "/member/updateMsg",
		data : {profileMsg : profileMsg},
		type : "post",
		success : function(data){
			$("#profileContent").text(data);
		},
		error : function(){
			console.log("에러");
		}
	});
});


</script>